//SPDX-License-Identifier:MIT

pragma solidity 0.8.20;

import {Test,console}from "forge-std/Test.sol";
import {MoodNft}from"../../src/MoodNft.sol";
import {DeployMoodNFT}from"../../script/DeployMoodNFT.s.sol";

contract MoodNftIntegrationTest is Test{
MoodNft moodNft;
DeployMoodNFT deployer;
 string public constant HAPPY_MOOD_IMAGE_URI =
        "data:application/json;base64,eyJuYW1lIjoiTW9vZCBORlQiLCAiZGVzY3JpcHRpb24iOiJBbiBORlQgdGhhdCByZWZsZWN0cyB0aGUgbW9vZCBvZiB0aGUgb3duZXIsIDEwMCUgb24gQ2hhaW4hIiwgImF0dHJpYnV0ZXMiOiBbeyJ0cmFpdF90eXBlIjogIm1vb2RpbmVzcyIsICJ2YWx1ZSI6IDEwMH1dLCAiaW1hZ2UiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIyYVdWM1FtOTRQU0l3SURBZ01qQXdJREl3TUNJZ2QybGtkR2c5SWpRd01DSWdJR2hsYVdkb2REMGlOREF3SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpUGdvZ0lEeGphWEpqYkdVZ1kzZzlJakV3TUNJZ1kzazlJakV3TUNJZ1ptbHNiRDBpZVdWc2JHOTNJaUJ5UFNJM09DSWdjM1J5YjJ0bFBTSmliR0ZqYXlJZ2MzUnliMnRsTFhkcFpIUm9QU0l6SWk4K0NpQWdQR2NnWTJ4aGMzTTlJbVY1WlhNaVBnb2dJQ0FnUEdOcGNtTnNaU0JqZUQwaU5qRWlJR041UFNJNE1pSWdjajBpTVRJaUx6NEtJQ0FnSUR4amFYSmpiR1VnWTNnOUlqRXlOeUlnWTNrOUlqZ3lJaUJ5UFNJeE1pSXZQZ29nSUR3dlp6NEtJQ0E4Y0dGMGFDQmtQU0p0TVRNMkxqZ3hJREV4Tmk0MU0yTXVOamtnTWpZdU1UY3ROalF1TVRFZ05ESXRPREV1TlRJdExqY3pJaUJ6ZEhsc1pUMGlabWxzYkRwdWIyNWxPeUJ6ZEhKdmEyVTZJR0pzWVdOck95QnpkSEp2YTJVdGQybGtkR2c2SURNN0lpOCtDand2YzNablBnPT0ifQ==";

    string public constant SAD_MOOD_IMAGE_URI =
        "data:application/json;base64,eyJuYW1lIjoiTW9vZCBORlQiLCAiZGVzY3JpcHRpb24iOiJBbiBORlQgdGhhdCByZWZsZWN0cyB0aGUgbW9vZCBvZiB0aGUgb3duZXIsIDEwMCUgb24gQ2hhaW4hIiwgImF0dHJpYnV0ZXMiOiBbeyJ0cmFpdF90eXBlIjogIm1vb2RpbmVzcyIsICJ2YWx1ZSI6IDEwMH1dLCAiaW1hZ2UiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQnpkR0Z1WkdGc2IyNWxQU0p1YnlJL1BnbzhjM1puSUhkcFpIUm9QU0l4TURJMGNIZ2lJR2hsYVdkb2REMGlNVEF5TkhCNElpQjJhV1YzUW05NFBTSXdJREFnTVRBeU5DQXhNREkwSWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpUGdvZ0lEeHdZWFJvSUdacGJHdzlJaU16TXpNaUlHUTlJazAxTVRJZ05qUkRNalkwTGpZZ05qUWdOalFnTWpZMExqWWdOalFnTlRFeWN6SXdNQzQySURRME9DQTBORGdnTkRRNElEUTBPQzB5TURBdU5pQTBORGd0TkRRNFV6YzFPUzQwSURZMElEVXhNaUEyTkhwdE1DQTRNakJqTFRJd05TNDBJREF0TXpjeUxURTJOaTQyTFRNM01pMHpOekp6TVRZMkxqWXRNemN5SURNM01pMHpOeklnTXpjeUlERTJOaTQySURNM01pQXpOekl0TVRZMkxqWWdNemN5TFRNM01pQXpOeko2SWk4K0NpQWdQSEJoZEdnZ1ptbHNiRDBpSTBVMlJUWkZOaUlnWkQwaVRUVXhNaUF4TkRCakxUSXdOUzQwSURBdE16Y3lJREUyTmk0MkxUTTNNaUF6TnpKek1UWTJMallnTXpjeUlETTNNaUF6TnpJZ016Y3lMVEUyTmk0MklETTNNaTB6TnpJdE1UWTJMall0TXpjeUxUTTNNaTB6TnpKNlRUSTRPQ0EwTWpGaE5EZ3VNREVnTkRndU1ERWdNQ0F3SURFZ09UWWdNQ0EwT0M0d01TQTBPQzR3TVNBd0lEQWdNUzA1TmlBd2VtMHpOellnTWpjeWFDMDBPQzR4WXkwMExqSWdNQzAzTGpndE15NHlMVGd1TVMwM0xqUkROakEwSURZek5pNHhJRFUyTWk0MUlEVTVOeUExTVRJZ05UazNjeTA1TWk0eElETTVMakV0T1RVdU9DQTRPQzQyWXkwdU15QTBMakl0TXk0NUlEY3VOQzA0TGpFZ055NDBTRE0yTUdFNElEZ2dNQ0F3SURFdE9DMDRMalJqTkM0MExUZzBMak1nTnpRdU5TMHhOVEV1TmlBeE5qQXRNVFV4TGpaek1UVTFMallnTmpjdU15QXhOakFnTVRVeExqWmhPQ0E0SURBZ01DQXhMVGdnT0M0MGVtMHlOQzB5TWpSaE5EZ3VNREVnTkRndU1ERWdNQ0F3SURFZ01DMDVOaUEwT0M0d01TQTBPQzR3TVNBd0lEQWdNU0F3SURrMmVpSXZQZ29nSUR4d1lYUm9JR1pwYkd3OUlpTXpNek1pSUdROUlrMHlPRGdnTkRJeFlUUTRJRFE0SURBZ01TQXdJRGsySURBZ05EZ2dORGdnTUNBeElEQXRPVFlnTUhwdE1qSTBJREV4TW1NdE9EVXVOU0F3TFRFMU5TNDJJRFkzTGpNdE1UWXdJREUxTVM0MllUZ2dPQ0F3SURBZ01DQTRJRGd1TkdnME9DNHhZelF1TWlBd0lEY3VPQzB6TGpJZ09DNHhMVGN1TkNBekxqY3RORGt1TlNBME5TNHpMVGc0TGpZZ09UVXVPQzA0T0M0MmN6a3lJRE01TGpFZ09UVXVPQ0E0T0M0Mll5NHpJRFF1TWlBekxqa2dOeTQwSURndU1TQTNMalJJTmpZMFlUZ2dPQ0F3SURBZ01DQTRMVGd1TkVNMk5qY3VOaUEyTURBdU15QTFPVGN1TlNBMU16TWdOVEV5SURVek0zcHRNVEk0TFRFeE1tRTBPQ0EwT0NBd0lERWdNQ0E1TmlBd0lEUTRJRFE0SURBZ01TQXdMVGsySURCNklpOCtDand2YzNablBnbz0ifQ==";
 string public constant SAD_SVG_URI="data:application/json;base64,eyJuYW1lIjoiTW9vZE5mdCIsICJkZXNjcmlwdGlvbjpBbiBuZnQgdGhhdCByZWZsZWN0cyB0aGUgb3duZXJzIG1vb2QuIiwgImF0dHJpYnV0ZXMiOlt7InRyYWl0X3R5cGUiOiJtb29kaW5lcyIsInZhbHVlIjoxMDB9XSwgImltYWdlIjoiZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUp1WVcxbElqb2lUVzl2WkNCT1JsUWlMQ0FpWkdWelkzSnBjSFJwYjI0aU9pSkJiaUJPUmxRZ2RHaGhkQ0J5Wldac1pXTjBjeUIwYUdVZ2JXOXZaQ0J2WmlCMGFHVWdiM2R1WlhJc0lERXdNQ1VnYjI0Z1EyaGhhVzRoSWl3Z0ltRjBkSEpwWW5WMFpYTWlPaUJiZXlKMGNtRnBkRjkwZVhCbElqb2dJbTF2YjJScGJtVnpjeUlzSUNKMllXeDFaU0k2SURFd01IMWRMQ0FpYVcxaFoyVWlPaUprWVhSaE9tbHRZV2RsTDNOMlp5dDRiV3c3WW1GelpUWTBMRkJFT1RSaVYzZG5aRzFXZVdNeWJIWmlhakJwVFZNMGQwbHBRbnBrUjBaMVdrZEdjMkl5Tld4UVUwcDFZbmxKTDFCbmJ6aGpNMXB1U1Voa2NGcElVbTlRVTBsNFRVUkpNR05JWjJsSlIyaHNZVmRrYjJSRU1HbE5WRUY1VGtoQ05FbHBRakpoVjFZelVXMDVORkJUU1hkSlJFRm5UVlJCZVU1RFFYaE5SRWt3U1dsQ05HSlhlSFZqZWpCcFlVaFNNR05FYjNaTU0yUXpaSGsxTTAxNU5YWmpiV04yVFdwQmQwMURPWHBrYldOcFVHZHZaMGxFZUhkWldGSnZTVWRhY0dKSGR6bEphVTE2VFhwTmFVbEhVVGxKYXpBeFRWUkpaMDVxVWtSTmFsa3dUR3BaWjA1cVVXZE9hbEZuVFdwWk1FeHFXV2RPYWxGblRsUkZlV042U1hkTlF6UXlTVVJSTUU5RFFUQk9SR2RuVGtSUk5FbEVVVEJQUXpCNVRVUkJkVTVwUVRCT1JHZDBUa1JSTkZWNll6RlBVelF3U1VSWk1FbEVWWGhOYVVFeVRraHdkRTFEUVRSTmFrSnFURlJKZDA1VE5EQkpSRUYwVFhwamVVeFVSVEpPYVRReVRGUk5NMDFwTUhwT2VrcDZUVlJaTWt4cVdYUk5lbU41U1VSTk0wMXBNSHBPZWtsblRYcGplVWxFUlRKT2FUUXlTVVJOTTAxcFFYcE9la2wwVFZSWk1reHFXV2ROZW1ONVRGUk5NMDFwUVhwT2VrbzJTV2s0SzBOcFFXZFFTRUpvWkVkbloxcHRiSE5pUkRCcFNUQlZNbEpVV2taT2FVbG5Xa1F3YVZSVVZYaE5hVUY0VGtSQ2FreFVTWGRPVXpRd1NVUkJkRTE2WTNsSlJFVXlUbWswTWt4VVRUTk5hVUY2VG5wS2VrMVVXVEpNYWxsblRYcGplVWxFVFROTmFVRjZUbnBKWjAxNlkzbE1WRVV5VG1rME1rbEVUVE5OYVRCNlRucEpkRTFVV1RKTWFsbDBUWHBqZVV4VVRUTk5hVEI2VG5wS05sUlVTVFJQUTBFd1RXcEdhRTVFWjNWTlJFVm5Ua1JuZFUxRVJXZE5RMEYzU1VSRlowOVVXV2ROUTBFd1QwTTBkMDFUUVRCUFF6UjNUVk5CZDBsRVFXZE5VekExVG1sQmQyVnRNSHBPZWxsblRXcGplV0ZETURCUFF6UjRXWGt3TUV4cVNXZE5RekF6VEdwbmRFMTVOSGxNVkdkMVRWTXdNMHhxVWtST2FrRXdTVVJaZWs1cE5IaEpSRlV5VFdrME1VbEVWVFZPZVVFeFRWUkpaMDVVYXpOamVUQTFUV2swZUVsRVRUVk1ha1YwVDFSVmRVOURRVFJQUXpReVdYa3dkVTE1UVRCTWFrbDBUWGswTlVsRVkzVk9RekEwVEdwRlowNTVOREJUUkUweVRVZEZORWxFWjJkTlEwRjNTVVJGZEU5RE1EUk1hbEpxVGtNME1FeFVaekJNYWsxblRucFJkVTVUTUhoT1ZFVjFUbWxCZUU1cVFYUk5WRlY0VEdwYWVrMVVWVEZNYWxsblRtcGpkVTE1UVhoT2FrRm5UVlJWZUV4cVdtaFBRMEUwU1VSQlowMURRWGhNVkdkblQwTTBNR1Z0TUhsT1F6QjVUV3BTYUU1RVozVk5SRVZuVGtSbmRVMUVSV2ROUTBGM1NVUkZaMDFETURWT2FVRXdUME0wZDAxVFFUQlBRelIzVFZOQmQwbEVRV2ROVTBGM1NVUnJNbVZwU1haUVoyOW5TVVI0ZDFsWVVtOUpSMXB3WWtkM09VbHBUWHBOZWsxcFNVZFJPVWxyTUhsUFJHZG5Ua1JKZUZsVVVUUkpSRkUwU1VSQlowMVRRWGRKUkdzeVNVUkJaMDVFWjJkT1JHZG5UVU5CZUVsRVFYUlBWRmxuVFVod2RFMXFTVEJKUkVWNFRXMU5kRTlFVlhWT1UwRjNURlJGTVU1VE5ESkpSRmt6VEdwTmRFMVVXWGRKUkVVeFRWTTBNbGxVWjJkUFEwRjNTVVJCWjAxRFFUUkpSR2QxVGtkbk1FOUROSGhaZWxGMVRXbEJkMGxFWTNWUFF6QjZUR3BKWjA5RE5IaE1WR04xVGtOQmVreHFZM1JPUkd0MVRsTkJNRTVUTkhwTVZHYzBUR3BaWjA5VVZYVlBRekEwVDBNME1tTjZhM2xKUkUwMVRHcEZaMDlVVlhWUFEwRTBUME0wTWxsNU5IcEpSRkYxVFdsQmVreHFhMmRPZVRRd1NVUm5kVTFUUVROTWFsSkpUbXBaTUZsVVoyZFBRMEYzU1VSQlowMURRVFJNVkdkMVRrVk5NazVxWTNWT2FVRXlUVVJCZFUxNVFURlBWR04xVGxOQk1VMTZUV2RPVkVWNVNVUlZlazB6Y0hSTlZFazBURlJGZUUxdFJUQlBRMEV3VDBOQmQwbEVSV2ROUTBFMVRtbEJkMGxFVVRSSlJGRTBTVVJCWjAxVFFYZE1WR3N5U1VSQ05rbHBPQ3REYW5kMll6TmFibEJuYnowaWZRPT0iICB9";
 address public constant USER = address(1);
function setUp()public{
 deployer=new DeployMoodNFT();
 moodNft=deployer.run();
}
function testViewTokenURI()public{
    vm.prank(USER);
    moodNft.mintNft();
    console.log(moodNft.tokenURI(0));
}
function testFlipTokenToSad()public{
    vm.prank(USER);
    moodNft.mintNft();

    vm.prank(USER);
    moodNft.flipMood(0);
    assertEq(keccak256(abi.encodePacked(moodNft.tokenURI(0))),keccak256(abi.encodePacked(SAD_SVG_URI)));
 }
}